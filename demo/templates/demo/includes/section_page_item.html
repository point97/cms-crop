{% load pageurl image_tags %}

{# Individual section - used on homepage for sections #}

<div class="col-md-9 col-sm-9 main-content">
    <div id="{{section.slug}}" name="{{section.slug}}">

        {% if section.topic_pics %}
            <div carousel topics='topics'>{% include "demo/includes/carousel.html" with carousel_items=section.topic_pics %}</div>
        {% else %}
            {% if section.image %}
                {% image section.image width-790 %}
            {% else %}
                <img src="http://placehold.it/790x440" width="100%">
            {% endif %}
        {% endif %}

        <h4 class="list-group-item-heading">{{ section.title }}</h4>

        <div ng-hide='topics.active' class="list-group-item-body">{{ section.body|safe}}</div>

        {% if section.data_catalogs %}
        <h1 class="blue" ng-click="showDataCatalogs = (showDataCatalogs === false); ">
            Preview Data Catalogs <i ng-class="{'fa fa-angle-right':!showDataCatalogs, 'fa fa-angle-down':showDataCatalogs}"></i>
        </h1>
            {% for obj in section.data_catalogs %}
                {% include "demo/includes/topic_catalog_list.html" %}
            {% endfor %}
        {% endif %}

        {% if section.data_priorities %}
            <h1 class="green" ng-click="showDataPriorities = (showDataPriorities === false); " >
                See Data Priorities <i ng-class="{'fa fa-angle-right':!showDataPriorities, 'fa fa-angle-down':showDataPriorities}"></i>
            </h1>
            {% for obj in section.data_priorities %}
                {% include "demo/includes/topic_priority_list.html" %}
            {% endfor %}
        {% endif %}
    </div>
</div>


<div class="col-md-3 col-sm-3 sidebar">
    {% if section.topics %}
        <div class="header">{{ section.sidebar_title }}</div>
        {% verbatim %}
        WTF {{ topics.active }}
        {% endverbatim %}

        <div class="content">
            {% for topic in section.topics %}    
            <div id="{{topic.slug}}" class="topic-menu-item" ng-click="setTopic('{{topic.slug}}')" ng-class="{'active':topics.active === '{{topic.slug}}'}">
                <i class="fa fa-angle-right" ng-show="topics.active === '{{ topic.slug }}' " ></i><strong>{{topic.title}}</strong>
                <p>{{topic.short_description|safe}}</p>
            </div>
            {% endfor %}
        </div>
    {% else %}

        <div eventcalendar></div>

    {% endif %}




</div>